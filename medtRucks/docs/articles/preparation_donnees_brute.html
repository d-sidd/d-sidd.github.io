<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="medtRucks">
<title>Préparation des donnée brutes dans le cadre du calcul des APL • medtRucks</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Préparation des donnée brutes dans le cadre du calcul des APL">
<meta property="og:description" content="medtRucks">
<meta property="og:image" content="https://github.com/arnaudmilet/medtRucks/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Passer au contenu</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">medtRucks</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Activer la navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Référence</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/preparation_donnees_brute.html">Préparation des donnée brutes dans le cadre du calcul des APL</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Activer la navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Rechercher" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Préparation des donnée brutes dans le cadre du calcul des APL</h1>
            
      
      
      <div class="d-none name"><code>preparation_donnees_brute.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">medtRucks</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attachement du package : 'dplyr'</span>
<span class="co">#&gt; Les objets suivants sont masqués depuis 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; Les objets suivants sont masqués depuis 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span></code></pre></div>
<p>Cette vignette est destinée à détailler l’utilisation des fonctions du package medtRucks du téléchargement des données brutes à leur traitement.</p>
<div class="section level2">
<h2 id="installation-du-package-medtrucks">Installation du package medtRucks<a class="anchor" aria-label="anchor" href="#installation-du-package-medtrucks"></a>
</h2>
</div>
<div class="section level2">
<h2 id="télécharger-préparer-et-traiter-les-données-brutes">Télécharger, préparer et traiter les données brutes<a class="anchor" aria-label="anchor" href="#t%C3%A9l%C3%A9charger-pr%C3%A9parer-et-traiter-les-donn%C3%A9es-brutes"></a>
</h2>
<div class="section level3">
<h3 id="les-données-ameli">Les données AMELI<a class="anchor" aria-label="anchor" href="#les-donn%C3%A9es-ameli"></a>
</h3>
<div class="section level4">
<h4 id="les-données-de-remboursement-mensuel-ex-r2017-r2020">Les données de remboursement mensuel (ex: R2017, R2020)<a class="anchor" aria-label="anchor" href="#les-donn%C3%A9es-de-remboursement-mensuel-ex-r2017-r2020"></a>
</h4>
<p>Les données initiales doivent être stockées dans un même répertoire (au choix), avoir un nom du type RAAAAMM et être au format CSV (R202001.csv). Les données téléchargées depuis le site <a href="https://www.data.gouv.fr/fr/datasets/depenses-d-assurance-maladie-hors-prestations-hospitalieres-par-caisse-primaire-departement/#community-reuses" class="external-link">data.gouv.fr</a> ont cette forme:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="1%">
<col width="6%">
<col width="0%">
<col width="1%">
<col width="0%">
<col width="3%">
<col width="1%">
<col width="3%">
<col width="7%">
<col width="1%">
<col width="1%">
<col width="11%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="5%">
<col width="1%">
<col width="6%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="5%">
<col width="1%">
<col width="4%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="6%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
</colgroup>
<thead><tr class="header">
<th align="right">PRS_FAC_TOP</th>
<th align="left">l_fac_top</th>
<th align="right">cpam</th>
<th align="left">l_cpam</th>
<th align="left">dpt</th>
<th align="left">l_dpt</th>
<th align="right">region</th>
<th align="left">l_region</th>
<th align="left">l_serie</th>
<th align="left">SERIE</th>
<th align="right">prs_nat</th>
<th align="left">l_prs_nat</th>
<th align="right">sns_date</th>
<th align="right">asu_nat</th>
<th align="left">l_asu_nat</th>
<th align="right">cpl_cod</th>
<th align="left">l_cpl_cod</th>
<th align="right">ben_qlt</th>
<th align="left">l_ben_qlt</th>
<th align="right">REM_TAU</th>
<th align="right">pre_spe</th>
<th align="left">l_pre_spe</th>
<th align="right">pre_spe1</th>
<th align="left">l_pre_spe1</th>
<th align="right">pre_stj1</th>
<th align="left">l_pre_stj1</th>
<th align="right">exe_spe</th>
<th align="left">l_exe_spe</th>
<th align="right">exe_spe1</th>
<th align="left">l_exe_spe1</th>
<th align="right">exe_stj1</th>
<th align="left">l_exe_stj1</th>
<th align="right">top_slm</th>
<th align="left">l_top_slm</th>
<th align="right">rem_mon</th>
<th align="right">rec_mon</th>
<th align="right">dep_mon</th>
<th align="right">act_dnb</th>
<th align="right">act_coe</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">0-R<e9>gime G<e9>n<e9>ral stricto-sensu</e9></e9></e9>
</td>
<td align="right">441</td>
<td align="left">441-Nantes</td>
<td align="left">44</td>
<td align="left">44-Loire-atlantique</td>
<td align="right">52</td>
<td align="left">52-PAYS DE LA LOIRE</td>
<td align="left">C Omnipraticiens</td>
<td align="left">111111</td>
<td align="right">1935</td>
<td align="left">MAJORATION CONSULTATION REGULEE DIMANCHE, JOURS FERIES ET ASSIMILES</td>
<td align="right">201906</td>
<td align="right">1</td>
<td align="left">Maladie</td>
<td align="right">1</td>
<td align="left">Majoration de nuit</td>
<td align="right">3</td>
<td align="left">3-Enfant</td>
<td align="right">70</td>
<td align="right">1</td>
<td align="left">01-TOTAL Omnipraticiens</td>
<td align="right">1</td>
<td align="left">M<e9>decins Omnipraticiens lib<e9>raux</e9></e9>
</td>
<td align="right">1</td>
<td align="left">Lib<e9>ral</e9>
</td>
<td align="right">1</td>
<td align="left">01-TOTAL Omnipraticiens</td>
<td align="right">11</td>
<td align="left">M<e9>decins Omnipraticiens</e9>
</td>
<td align="right">1</td>
<td align="left">Lib<e9>ral</e9>
</td>
<td align="right">1</td>
<td align="left">1-TOP Sections Locales Mutualistes</td>
<td align="right">18.55</td>
<td align="right">26.50</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1.00</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">1-Ex-RSI</td>
<td align="right">811</td>
<td align="left">811-Albi</td>
<td align="left">81</td>
<td align="left">81-Tarn</td>
<td align="right">73</td>
<td align="left">73-MIDI PYRENEES</td>
<td align="left">R<e9>mun<e9>ration suivi personnes <e2>g<e9>es V</e9></e2></e9></e9>
</td>
<td align="left">111119B</td>
<td align="right">1148</td>
<td align="left">REMUNERATION FORFAITAIRE PAR CONSULTATION POUR LE SUIVI DES PERSONNES AGEES</td>
<td align="right">201912</td>
<td align="right">1</td>
<td align="left">Maladie</td>
<td align="right">1</td>
<td align="left">Majoration de nuit</td>
<td align="right">1</td>
<td align="left">1-Assur<e9></e9>
</td>
<td align="right">100</td>
<td align="right">5</td>
<td align="left">05-Dermatologie et v<e9>n<e9>rologie</e9></e9>
</td>
<td align="right">2</td>
<td align="left">M<e9>decins Sp<e9>cialistes lib<e9>raux</e9></e9></e9>
</td>
<td align="right">1</td>
<td align="left">Lib<e9>ral</e9>
</td>
<td align="right">5</td>
<td align="left">05-Dermatologie et v<e9>n<e9>rologie</e9></e9>
</td>
<td align="right">12</td>
<td align="left">M<e9>decins Sp<e9>cialistes</e9></e9>
</td>
<td align="right">1</td>
<td align="left">Lib<e9>ral</e9>
</td>
<td align="right">0</td>
<td align="left">0-TOP Hors Sections Locales Mutualistes</td>
<td align="right">2.68</td>
<td align="right">2.68</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.54</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">0-R<e9>gime G<e9>n<e9>ral stricto-sensu</e9></e9></e9>
</td>
<td align="right">571</td>
<td align="left">571-Metz</td>
<td align="left">57</td>
<td align="left">57-Moselle</td>
<td align="right">41</td>
<td align="left">41-LORRAINE</td>
<td align="left">C Sages-femmes</td>
<td align="left">111115</td>
<td align="right">1111</td>
<td align="left">CONSULTATION COTEE C</td>
<td align="right">201906</td>
<td align="right">1</td>
<td align="left">Maladie</td>
<td align="right">0</td>
<td align="left">Sans majoration</td>
<td align="right">3</td>
<td align="left">3-Enfant</td>
<td align="right">70</td>
<td align="right">21</td>
<td align="left">21-Sages-femmes</td>
<td align="right">5</td>
<td align="left">Sages-Femmes lib<e9>rales</e9>
</td>
<td align="right">1</td>
<td align="left">Lib<e9>ral</e9>
</td>
<td align="right">21</td>
<td align="left">21-Sages-femmes</td>
<td align="right">50</td>
<td align="left">Sages-Femmes</td>
<td align="right">1</td>
<td align="left">Lib<e9>ral</e9>
</td>
<td align="right">0</td>
<td align="left">0-TOP Hors Sections Locales Mutualistes</td>
<td align="right">16.10</td>
<td align="right">23.00</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1.00</td>
</tr>
</tbody>
</table>
<p>Ici, nous utiliserons la fonction <code>mt_split_damir_R</code> dont la seule utilité est de :</p>
<p>1- Lire les fichiers mensuels volumineux mis à disposition par AMELI sur la plateforme data.gouv au format csv 2- Extraire chaque département pour chaque mois 3- Enregistrer les extractions départementales agrégées par année dans le même dossier que les données initial au format rds natif de R.</p>
<p>La fonction <code>mt_split_damir_R</code> a cinq arguments:</p>
<ul>
<li>
<strong>chemin</strong>: chemin des données initiale(par ex: C:/Users/Arnaud/AppData/Local/Temp/RtmpwPKPw7/temp_libpath58ccc9845ed/medtRucks/extdata)<br>
</li>
<li>
<strong>millesime</strong>: année du millésime traité (ex: 2020),</li>
<li>
<strong>variable</strong>: nom de la variable contenant les code département (ex: dept),</li>
<li>
<strong>i</strong>: le numéro du mois à extraire (ex:1 pour janvier),</li>
<li>
<strong>ecriture</strong>: TRUE ou FALSE, indique si la fonction doit écrire les fichiers rds générés dans le dossier initial. F sert uniquement dans le cadre des exemples et n’a aucune autre utilité.</li>
</ul>
<p>Elle affiche en console le numéro de chaque département traité.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chemin_data_init_damir_R</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,package <span class="op">=</span> <span class="st">"medtRucks"</span><span class="op">)</span>
<span class="va">millesime_damir_R</span> <span class="op">=</span> <span class="fl">2020</span>
<span class="va">variable_nom_dep</span> <span class="op">=</span> <span class="st">"dpt"</span>

<span class="fu"><a href="../reference/mt_split_damir_R.html">mt_split_damir_R</a></span><span class="op">(</span>chemin<span class="op">=</span><span class="va">chemin_data_init_damir_R</span>,millesime<span class="op">=</span><span class="va">millesime_damir_R</span>,variable<span class="op">=</span><span class="va">variable_nom_dep</span>,i<span class="op">=</span><span class="fl">1</span>,ecriture<span class="op">=</span><span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt; [1] 1</span>
<span class="co">#&gt; [1] 2</span>
<span class="co">#&gt; [1] 7</span>
<span class="co">#&gt; [1] 10</span>
<span class="co">#&gt; [1] 13</span>
<span class="co">#&gt; [1] 16</span>
<span class="co">#&gt; [1] 18</span>
<span class="co">#&gt; [1] 22</span>
<span class="co">#&gt; [1] 24</span>
<span class="co">#&gt; [1] 26</span>
<span class="co">#&gt; [1] 27</span>
<span class="co">#&gt; [1] 28</span>
<span class="co">#&gt; [1] 29</span>
<span class="co">#&gt; [1] 30</span>
<span class="co">#&gt; [1] 31</span>
<span class="co">#&gt; [1] 32</span>
<span class="co">#&gt; [1] 33</span>
<span class="co">#&gt; [1] 34</span>
<span class="co">#&gt; [1] 35</span>
<span class="co">#&gt; [1] 37</span>
<span class="co">#&gt; [1] 38</span>
<span class="co">#&gt; [1] 41</span>
<span class="co">#&gt; [1] 44</span>
<span class="co">#&gt; [1] 47</span>
<span class="co">#&gt; [1] 50</span>
<span class="co">#&gt; [1] 52</span>
<span class="co">#&gt; [1] 54</span>
<span class="co">#&gt; [1] 55</span>
<span class="co">#&gt; [1] 57</span>
<span class="co">#&gt; [1] 59</span>
<span class="co">#&gt; [1] 61</span>
<span class="co">#&gt; [1] 62</span>
<span class="co">#&gt; [1] 64</span>
<span class="co">#&gt; [1] 66</span>
<span class="co">#&gt; [1] 67</span>
<span class="co">#&gt; [1] 68</span>
<span class="co">#&gt; [1] 69</span>
<span class="co">#&gt; [1] 71</span>
<span class="co">#&gt; [1] 72</span>
<span class="co">#&gt; [1] 73</span>
<span class="co">#&gt; [1] 74</span>
<span class="co">#&gt; [1] 75</span>
<span class="co">#&gt; [1] 76</span>
<span class="co">#&gt; [1] 77</span>
<span class="co">#&gt; [1] 78</span>
<span class="co">#&gt; [1] 79</span>
<span class="co">#&gt; [1] 81</span>
<span class="co">#&gt; [1] 83</span>
<span class="co">#&gt; [1] 84</span>
<span class="co">#&gt; [1] 85</span>
<span class="co">#&gt; [1] 86</span>
<span class="co">#&gt; [1] 90</span>
<span class="co">#&gt; [1] 91</span>
<span class="co">#&gt; [1] 93</span>
<span class="co">#&gt; [1] 971</span>
<span class="co">#&gt; [1] 972</span>
<span class="co">#&gt; [1] 973</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="les-données-extraites-du-sniiram-ex-a2017-a2020">Les données extraites du SNIIRAM (ex: A2017, A2020)<a class="anchor" aria-label="anchor" href="#les-donn%C3%A9es-extraites-du-sniiram-ex-a2017-a2020"></a>
</h4>
<p>Les données initiales doivent être stockées dans un même répertoire (au choix), avoir un nom du type AAAAAMM et être au format CSV (A202001.csv). Les données téléchargées depuis le site <a href="https://www.data.gouv.fr/fr/datasets/open-damir-base-complete-sur-les-depenses-dassurance-maladie-inter-regimes/" class="external-link">data.gouv.fr</a> ont cette forme:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="1%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="2%">
<col width="1%">
<col width="0%">
</colgroup>
<thead><tr class="header">
<th align="right">FLX_ANN_MOI</th>
<th align="right">ORG_CLE_REG</th>
<th align="right">AGE_BEN_SNDS</th>
<th align="right">BEN_RES_REG</th>
<th align="right">BEN_CMU_TOP</th>
<th align="right">BEN_QLT_COD</th>
<th align="right">BEN_SEX_COD</th>
<th align="right">DDP_SPE_COD</th>
<th align="right">ETE_CAT_SNDS</th>
<th align="right">ETE_REG_COD</th>
<th align="right">ETE_TYP_SNDS</th>
<th align="right">ETP_REG_COD</th>
<th align="right">ETP_CAT_SNDS</th>
<th align="right">MDT_TYP_COD</th>
<th align="right">MFT_COD</th>
<th align="right">PRS_FJH_TYP</th>
<th align="right">PRS_ACT_COG</th>
<th align="right">PRS_ACT_NBR</th>
<th align="right">PRS_ACT_QTE</th>
<th align="right">PRS_DEP_MNT</th>
<th align="right">PRS_PAI_MNT</th>
<th align="right">PRS_REM_BSE</th>
<th align="right">PRS_REM_MNT</th>
<th align="right">FLT_ACT_COG</th>
<th align="right">FLT_ACT_NBR</th>
<th align="right">FLT_ACT_QTE</th>
<th align="right">FLT_PAI_MNT</th>
<th align="right">FLT_DEP_MNT</th>
<th align="right">FLT_REM_MNT</th>
<th align="right">SOI_ANN</th>
<th align="right">SOI_MOI</th>
<th align="right">ASU_NAT</th>
<th align="right">ATT_NAT</th>
<th align="right">CPL_COD</th>
<th align="right">CPT_ENV_TYP</th>
<th align="right">DRG_AFF_NAT</th>
<th align="right">ETE_IND_TAA</th>
<th align="right">EXO_MTF</th>
<th align="right">MTM_NAT</th>
<th align="right">PRS_NAT</th>
<th align="right">PRS_PPU_SEC</th>
<th align="right">PRS_REM_TAU</th>
<th align="right">PRS_REM_TYP</th>
<th align="right">PRS_PDS_QCP</th>
<th align="right">EXE_INS_REG</th>
<th align="right">PSE_ACT_SNDS</th>
<th align="right">PSE_ACT_CAT</th>
<th align="right">PSE_SPE_SNDS</th>
<th align="right">PSE_STJ_SNDS</th>
<th align="right">PRE_INS_REG</th>
<th align="right">PSP_ACT_SNDS</th>
<th align="right">PSP_ACT_CAT</th>
<th align="right">PSP_SPE_SNDS</th>
<th align="right">PSP_STJ_SNDS</th>
<th align="right">TOP_PS5_TRG</th>
<th align="left">V56</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">202001</td>
<td align="right">32</td>
<td align="right">20</td>
<td align="right">32</td>
<td align="right">9</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">2206</td>
<td align="right">11</td>
<td align="right">1</td>
<td align="right">11</td>
<td align="right">2206</td>
<td align="right">9</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">23.00</td>
<td align="right">23.00</td>
<td align="right">16.10</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">23.00</td>
<td align="right">0</td>
<td align="right">16.10</td>
<td align="right">2020</td>
<td align="right">1</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">99</td>
<td align="right">0</td>
<td align="right">99</td>
<td align="right">9</td>
<td align="right">1111</td>
<td align="right">2</td>
<td align="right">70</td>
<td align="right">99</td>
<td align="right">31</td>
<td align="right">99</td>
<td align="right">19</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">99</td>
<td align="right">19</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">9</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">202001</td>
<td align="right">93</td>
<td align="right">30</td>
<td align="right">93</td>
<td align="right">9</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">9999</td>
<td align="right">99</td>
<td align="right">99</td>
<td align="right">99</td>
<td align="right">9999</td>
<td align="right">9</td>
<td align="right">99</td>
<td align="right">8</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">9.59</td>
<td align="right">9.59</td>
<td align="right">9.59</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">9.59</td>
<td align="right">0</td>
<td align="right">9.59</td>
<td align="right">2019</td>
<td align="right">10</td>
<td align="right">30</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">99</td>
<td align="right">9</td>
<td align="right">99</td>
<td align="right">9</td>
<td align="right">3313</td>
<td align="right">2</td>
<td align="right">100</td>
<td align="right">99</td>
<td align="right">31</td>
<td align="right">93</td>
<td align="right">50</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">93</td>
<td align="right">50</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">202001</td>
<td align="right">75</td>
<td align="right">70</td>
<td align="right">75</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">121</td>
<td align="right">9999</td>
<td align="right">99</td>
<td align="right">99</td>
<td align="right">75</td>
<td align="right">1101</td>
<td align="right">9</td>
<td align="right">99</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">5.10</td>
<td align="right">5.10</td>
<td align="right">3.31</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">5.10</td>
<td align="right">0</td>
<td align="right">3.31</td>
<td align="right">2020</td>
<td align="right">1</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">35</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3386</td>
<td align="right">2</td>
<td align="right">65</td>
<td align="right">0</td>
<td align="right">31</td>
<td align="right">75</td>
<td align="right">50</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">99</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">12</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>Ici, nous utiliserons la fonction <code>mt_split_damir_A</code> dont la seule utilité est de :</p>
<p>1- Lire les fichiers mensuels volumineux mis à disposition par AMELI sur la plateforme data.gouv au format csv 2- Extraire chaque région pour chaque mois 3- Enregistrer les extractions régionales agrégées par année dans le même dossier que les données initial au format rds natif de R.</p>
<p>La fonction <code>mt_split_damir_A</code> a cinq arguments:</p>
<ul>
<li>
<strong>chemin</strong>: chemin des données initiale(par ex: C:/Users/Arnaud/AppData/Local/Temp/RtmpwPKPw7/temp_libpath58ccc9845ed/medtRucks/extdata)<br>
</li>
<li>
<strong>millesime</strong>: année du millésime traité (ex: 2020),</li>
<li>
<strong>variable</strong>: nom de la variable contenant les code région (ex: BEN_RES_REG),</li>
<li>
<strong>i</strong>: le numéro du mois à extraire (ex:1 pour janvier),</li>
<li>
<strong>ecriture</strong>: TRUE ou FALSE, indique si la fonction doit écrire les fichiers rds générés dans le dossier initial. F sert uniquement dans le cadre des exemples et n’a aucune autre utilité.</li>
</ul>
<p>Elle affiche en console le numéro de chaque région traitée.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chemin_data_init_damir_A</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,package <span class="op">=</span> <span class="st">"medtRucks"</span><span class="op">)</span>
<span class="va">millesime_damir_A</span> <span class="op">=</span> <span class="fl">2020</span>
<span class="va">variable_nom_reg</span> <span class="op">=</span> <span class="st">"BEN_RES_REG"</span>

<span class="fu"><a href="../reference/mt_split_damir_A.html">mt_split_damir_A</a></span><span class="op">(</span>chemin<span class="op">=</span><span class="va">chemin_data_init_damir_A</span>,millesime<span class="op">=</span><span class="va">millesime_damir_A</span>,variable<span class="op">=</span><span class="va">variable_nom_reg</span>,i<span class="op">=</span><span class="fl">1</span>,ecriture<span class="op">=</span><span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt; [1] 5</span>
<span class="co">#&gt; [1] 11</span>
<span class="co">#&gt; [1] 24</span>
<span class="co">#&gt; [1] 27</span>
<span class="co">#&gt; [1] 28</span>
<span class="co">#&gt; [1] 32</span>
<span class="co">#&gt; [1] 44</span>
<span class="co">#&gt; [1] 52</span>
<span class="co">#&gt; [1] 53</span>
<span class="co">#&gt; [1] 75</span>
<span class="co">#&gt; [1] 76</span>
<span class="co">#&gt; [1] 84</span>
<span class="co">#&gt; [1] 93</span>
<span class="co">#&gt; [1] 99</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="préparer-et-traiter-les-données-ameli-pour-créer-la-base-nb_actes_par_praticien">Préparer et traiter les données AMELI pour créer la base nb_actes_par_praticien<a class="anchor" aria-label="anchor" href="#pr%C3%A9parer-et-traiter-les-donn%C3%A9es-ameli-pour-cr%C3%A9er-la-base-nb_actes_par_praticien"></a>
</h4>
<p>Les données initiales doivent être stockées dans un même répertoire (au choix) et être au format xlsx. Les données téléchargées depuis le site <a href="https://assurance-maladie.ameli.fr/etudes-et-donnees/patientele-medecins-liberaux-ape-region-2020" class="external-link">AMELI</a> sont stockées sur 3 onglets des fichiers départementaux et régionaux:</p>
<ul>
<li>
<strong>Effectifs PS</strong><br>
</li>
<li>
<strong>Patientèle moyenne par PS</strong><br>
</li>
<li><strong>Nombre d'actes par patient</strong></li>
</ul>
<p>Elles ont le format suivant :</p>
<div class="section level5">
<h5 id="effectif-des-medecins-ape-par-departement-en-2020">Effectif des medecins APE par departement en 2020<a class="anchor" aria-label="anchor" href="#effectif-des-medecins-ape-par-departement-en-2020"></a>
</h5>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="3%">
<col width="1%">
<col width="4%">
<col width="7%">
<col width="5%">
<col width="10%">
<col width="6%">
<col width="5%">
<col width="8%">
<col width="8%">
<col width="3%">
<col width="5%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">Département</th>
<th align="right">Généralistes</th>
<th align="right">MEP</th>
<th align="right">Omnipraticiens</th>
<th align="right">- 02-20 - Anesthésistes</th>
<th align="right">- 03 - Cardiologues</th>
<th align="right">-04-43-44-46-47-48-49- Chirurgiens</th>
<th align="right">- 05 - Dermatologues</th>
<th align="right">- 06 - Radiologues</th>
<th align="right">-07-70-77-79- Gynécologues</th>
<th align="right">- 08 - Gastro-entérologues</th>
<th align="right">- 11 - ORL</th>
<th align="right">- 12-78 - Pédiatres</th>
<th align="right">- 14 - Rhumatologues</th>
<th align="right">- 15 - Ophtalmologues</th>
<th align="right">-18-45-69 - Stomatologues</th>
<th align="right">-33-75- Psychiatres</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01- Ain</td>
<td align="right">304</td>
<td align="right">39</td>
<td align="right">343</td>
<td align="right">16</td>
<td align="right">19</td>
<td align="right">13</td>
<td align="right">6</td>
<td align="right">31</td>
<td align="right">13</td>
<td align="right">4</td>
<td align="right">9</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">10</td>
<td align="right">2</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">02- Aisne</td>
<td align="right">239</td>
<td align="right">19</td>
<td align="right">258</td>
<td align="right">8</td>
<td align="right">12</td>
<td align="right">15</td>
<td align="right">10</td>
<td align="right">24</td>
<td align="right">10</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">13</td>
<td align="right">1</td>
<td align="right">20</td>
</tr>
<tr class="odd">
<td align="left">03- Allier</td>
<td align="right">184</td>
<td align="right">27</td>
<td align="right">211</td>
<td align="right">8</td>
<td align="right">9</td>
<td align="right">24</td>
<td align="right">5</td>
<td align="right">15</td>
<td align="right">5</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">12</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
</div>
<div class="section level5">
<h5 id="patientele-moyenne-des-medecins-ape-par-departement-en-2020">Patientele moyenne des medecins APE par departement en 2020<a class="anchor" aria-label="anchor" href="#patientele-moyenne-des-medecins-ape-par-departement-en-2020"></a>
</h5>
<table class="table">
<colgroup>
<col width="3%">
<col width="3%">
<col width="2%">
<col width="4%">
<col width="7%">
<col width="5%">
<col width="10%">
<col width="6%">
<col width="5%">
<col width="7%">
<col width="7%">
<col width="3%">
<col width="5%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">Département</th>
<th align="right">Généralistes</th>
<th align="right">MEP</th>
<th align="right">Omnipraticiens</th>
<th align="right">- 02-20 - Anesthésistes</th>
<th align="right">- 03 - Cardiologues</th>
<th align="right">-04-43-44-46-47-48-49- Chirurgiens</th>
<th align="right">- 05 - Dermatologues</th>
<th align="right">-06 - Radiologues</th>
<th align="right">-07-70-77-79- Gynécologues</th>
<th align="right">- 08 - Gastro-entérologues</th>
<th align="right">- 11 - ORL</th>
<th align="right">- 12-78 - Pédiatres</th>
<th align="right">- 14 - Rhumatologues</th>
<th align="right">- 15 - Ophtalmologues</th>
<th align="right">-18-45-69 - Stomatologues</th>
<th align="right">-33-75- Psychiatres</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01- Ain</td>
<td align="right">1820.707</td>
<td align="right">1927.923</td>
<td align="right">1832.898</td>
<td align="right">2050.375</td>
<td align="right">1794.895</td>
<td align="right">1588.538</td>
<td align="right">NA</td>
<td align="right">7240.548</td>
<td align="right">1881</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">02- Aisne</td>
<td align="right">2064.151</td>
<td align="right">2099.263</td>
<td align="right">2066.736</td>
<td align="right">NA</td>
<td align="right">1931.417</td>
<td align="right">1115.933</td>
<td align="right">NA</td>
<td align="right">7581.333</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5929.308</td>
<td align="right">NA</td>
<td align="right">694.95</td>
</tr>
<tr class="odd">
<td align="left">03- Allier</td>
<td align="right">1532.772</td>
<td align="right">1388.704</td>
<td align="right">1514.336</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">1422.042</td>
<td align="right">NA</td>
<td align="right">7149.467</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">6974.000</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
<div class="section level5">
<h5 id="nombre-dactes-par-patient-des-medecins-ape-par-departement-en-2020">Nombre d’actes par patient des medecins APE par departement en 2020<a class="anchor" aria-label="anchor" href="#nombre-dactes-par-patient-des-medecins-ape-par-departement-en-2020"></a>
</h5>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="3%">
<col width="2%">
<col width="4%">
<col width="7%">
<col width="5%">
<col width="10%">
<col width="6%">
<col width="5%">
<col width="7%">
<col width="7%">
<col width="3%">
<col width="5%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">Département</th>
<th align="right">Généralistes</th>
<th align="right">MEP</th>
<th align="right">Omnipraticiens</th>
<th align="right">- 02-20 - Anesthésistes</th>
<th align="right">- 03 - Cardiologues</th>
<th align="right">-04-43-44-46-47-48-49- Chirurgiens</th>
<th align="right">- 05 - Dermatologues</th>
<th align="right">- 06 - Radiologues</th>
<th align="right">-07-70-77-79- Gynécologues</th>
<th align="right">- 08 - Gastro-entérologues</th>
<th align="right">- 11 - ORL</th>
<th align="right">- 12-78 - Pédiatres</th>
<th align="right">- 14 - Rhumatologues</th>
<th align="right">- 15 - Ophtalmologues</th>
<th align="right">-18-45-69 - Stomatologues</th>
<th align="right">-33-75- Psychiatres</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01- Ain</td>
<td align="right">2.493958</td>
<td align="right">2.196518</td>
<td align="right">2.458385</td>
<td align="right">2.606474</td>
<td align="right">2.125385</td>
<td align="right">3.290688</td>
<td align="right">NA</td>
<td align="right">2.401351</td>
<td align="right">3.512453</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">02- Aisne</td>
<td align="right">3.121061</td>
<td align="right">2.661310</td>
<td align="right">3.086670</td>
<td align="right">NA</td>
<td align="right">2.168443</td>
<td align="right">3.410120</td>
<td align="right">NA</td>
<td align="right">2.133315</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">3.660772</td>
<td align="right">NA</td>
<td align="right">9.212245</td>
</tr>
<tr class="odd">
<td align="left">03- Allier</td>
<td align="right">2.893951</td>
<td align="right">2.789732</td>
<td align="right">2.881721</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">3.040728</td>
<td align="right">NA</td>
<td align="right">1.994452</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">2.740118</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>Ici, nous utiliserons la fonction <code>mt_crea_nb_actes_par_praticien</code> dont la seule utilité est de restituer un fichier de nombre d’actes par praticien, par spécialité et par département.</p>
<p>La fonction <code>mt_crea_nb_actes_par_praticien</code> a quatre arguments:</p>
<ul>
<li>
<strong>chemin</strong>: chemin des données initiale(par ex: C:/Users/Arnaud/AppData/Local/Temp/RtmpwPKPw7/temp_libpath58ccc9845ed/medtRucks/extdata)<br>
</li>
<li>
<strong>nom_fichier_dep</strong>: nom du fichier contenant les informations départementales (ex: 2020_patientele-des-medecins-liberaux-ape-par-departement_serie-annuelle.xlsx),<br>
</li>
<li>
<strong>nom_fichier_reg</strong>: nom du fichier contenant les informations régionales (ex: 2020_patientele-des-medecins-liberaux-ape-par-region_serie-annuelle.xlsx),<br>
</li>
<li>
<strong>ecriture</strong>: TRUE ou FALSE, indique si la fonction doit écrire les fichiers rds générés dans le dossier initial. F sert uniquement dans le cadre des exemples et n’a aucune autre utilité.</li>
</ul>
<p>Elle n’affiche rien en console et créée le fichier nb_actes_par_praticien.rds à l’emplacement initial.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chemin</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,package <span class="op">=</span> <span class="st">"medtRucks"</span><span class="op">)</span>
<span class="va">nom_fichier_dep</span> <span class="op">=</span> <span class="st">"2020_patientele-des-medecins-liberaux-ape-par-departement_serie-annuelle.xlsx"</span>
<span class="va">nom_fichier_reg</span> <span class="op">=</span> <span class="st">"2020_patientele-des-medecins-liberaux-ape-par-region_serie-annuelle.xlsx"</span>
<span class="fu"><a href="../reference/mt_crea_nb_actes_par_praticien.html">mt_crea_nb_actes_par_praticien</a></span><span class="op">(</span>chemin <span class="op">=</span> <span class="va">chemin</span>,
                       nom_fichier_dep <span class="op">=</span> <span class="va">nom_fichier_dep</span>,
                       nom_fichier_reg<span class="op">=</span><span class="va">nom_fichier_reg</span>,
                       ecriture <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>Sur cette page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Package créé et mis à disposition par Milet Arnaud, El Hilal Anass.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
